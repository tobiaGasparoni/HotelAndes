CREATE TABLE PLAN (
    ID NUMBER NOT NULL PRIMARY KEY,
    NOMBRE VARCHAR2(255) NOT NULL,
    COSTO NUMBER NOT NULL,
    DESCUENTO NUMBER NOT NULL,
    DIAS_ESTADIA NUMBER NOT NULL
);

CREATE TABLE INTERNET (
    ID NUMBER NOT NULL PRIMARY KEY,
    CAPACIDAD NUMBER NOT NULL,
    COSTO NUMBER NOT NULL
);

CREATE TABLE HOTEL (
    ID NUMBER NOT NULL PRIMARY KEY,
    NOMBRE VARCHAR2(255 BYTE) NOT NULL,
    CIUDAD VARCHAR2(255 BYTE) NOT NULL,
    PAIS VARCHAR2(255 BYTE) NOT NULL,
    DIRECCION VARCHAR2(255 BYTE) NOT NULL,
    INTERNET_ID NUMBER REFERENCES INTERNET(ID) UNIQUE
);

CREATE TABLE BAR (
    ID NUMBER NOT NULL PRIMARY KEY,
    NOMBRE VARCHAR2(255) NOT NULL,
    CAPACIDAD NUMBER NOT NULL,
    OCUPACION_ACTUAL NUMBER NOT NULL,
    ESTILO VARCHAR2(255) NOT NULL,
    HOTEL_ID NUMBER NOT NULL REFERENCES HOTEL(ID)
);

CREATE TABLE RESTAURANTE (
    ID NUMBER NOT NULL PRIMARY KEY,
    NOMBRE VARCHAR2(255) NOT NULL,
    CAPACIDAD NUMBER NOT NULL,
    OCUPACION_ACTUAL NUMBER NOT NULL,
    ESTILO VARCHAR2(255) NOT NULL,
    ID_HOTEL NUMBER REFERENCES HOTEL(ID)
);

CREATE TABLE SALON_CONFERENCIAS (
    ID NUMBER NOT NULL PRIMARY KEY,
    AMPLIFICACION_SONIDO NUMBER NOT NULL CHECK (AMPLIFICACION_SONIDO IN(0,1)),
    EQUIPOS_PC NUMBER NOT NULL CHECK (EQUIPOS_PC IN(0,1)),
    PROYECTOR NUMBER NOT NULL CHECK (PROYECTOR IN(0,1)),
    COSTO NUMBER NOT NULL,
    CAPACIDAD NUMBER NOT NULL,
    DURACION NUMBER NOT NULL,
    HORARIO DATE,
    HOTEL_ID NUMBER REFERENCES HOTEL(ID)
);

CREATE TABLE SALON_REUNIONES (
    ID NUMBER NOT NULL PRIMARY KEY,
    COSTO NUMBER NOT NULL,
    CAPACIDAD NUMBER NOT NULL,
    DURACION NUMBER NOT NULL,
    EQUIPOS_PC NUMBER NOT NULL CHECK (EQUIPOS_PC IN(0,1)),
    HORARIO DATE,
    PROYECTOR NUMBER NOT NULL CHECK (PROYECTOR IN(0,1)),
    HOTEL_ID NUMBER REFERENCES HOTEL(ID)
);

CREATE TABLE PISCINA (
    ID NUMBER PRIMARY KEY,
    CAPACIDAD NUMBER NOT NULL,
    OCUPACION_ACTUAL NUMBER NOT NULL,
    HORARIO_INICIAL DATE,
    HORARIO_FINAL DATE,
    PROFUNDIDAD NUMBER NOT NULL,
    HOTEL_ID NUMBER REFERENCES HOTEL(ID)
);

CREATE TABLE SPA (
    ID NUMBER NOT NULL PRIMARY KEY,
    NOMBRE VARCHAR2(255) NOT NULL,
    HOTEL_ID NUMBER NOT NULL REFERENCES HOTEL(ID)
);

CREATE TABLE SERVICIO(
    ID NUMBER NOT NULL PRIMARY KEY,
    NOMBRE VARCHAR2(255) NOT NULL,
    COSTO NUMBER NOT NULL,
    DURACION NUMBER NOT NULL,
    HORARIO DATE NOT NULL
);

CREATE TABLE TIPO_HABITACION (
    ID NUMBER NOT NULL PRIMARY KEY,
    NOMBRE VARCHAR2(255) NOT NULL UNIQUE,
    DESCRIPCION VARCHAR2(500) NOT NULL
);

CREATE TABLE RESERVA(
    ID NUMBER NOT NULL PRIMARY KEY,
    FECHA_ENTRADA DATE NOT NULL,
    FECHA_SALIDA DATE NOT NULL,
    NUMERO_PERSONAS NUMBER NOT NULL,
    PLAN_PAGO NUMBER REFERENCES PLAN(ID)
    --HABITACION_ID NUMBER NOT NULL REFERENCES HABITACION(ID)
);

CREATE TABLE HABITACION (
    ID NUMBER NOT NULL PRIMARY KEY,
    CAPACIDAD NUMBER NOT NULL,
    CONSUMO NUMBER NOT NULL,
    DISPONIBLE NUMBER NOT NULL CHECK(DISPONIBLE IN(0,1)),
    LLEGADA_CLIENTE NUMBER CHECK(LLEGADA_CLIENTE IN(0,1)),
    TIPO NUMBER NOT NULL REFERENCES TIPO_HABITACION(ID),
    RESERVA_ID NUMBER REFERENCES RESERVA(ID) UNIQUE,
    HOTEL_ID NUMBER NOT NULL REFERENCES HOTEL(ID)
);

ALTER TABLE RESERVA ADD HABITACION_ID NUMBER NOT NULL REFERENCES HABITACION(ID);

CREATE TABLE RESERVA_SERVICIO (
    ID NUMBER NOT NULL PRIMARY KEY,
    COSTO NUMBER NOT NULL,
    DESCRIPCION VARCHAR2(255) NOT NULL,
    FECHA DATE NOT NULL,
    NOMBRE_EMPLEADO VARCHAR2(255) NOT NULL,
    NUM_CLIENTES NUMBER NOT NULL,
    HABITACION_ID NUMBER REFERENCES HABITACION(ID),
    BAR_ID NUMBER REFERENCES BAR(ID),
    GIMNASIO_ID NUMBER REFERENCES RESTAURANTE(ID),
    PISCINA_ID NUMBER REFERENCES PISCINA(ID),
    SALON_REU_ID NUMBER REFERENCES SALON_REUNIONES(ID),
    RESTAURANTE_ID NUMBER REFERENCES RESTAURANTE(ID),
    SALON_CONF_ID NUMBER REFERENCES SALON_CONFERENCIAS(ID),
    SERVICIO_ID NUMBER REFERENCES SERVICIO(ID)
);

CREATE TABLE USUARIO ( -- Y SI UN CLIENTE ES TAMBIEN UN EMPLEADO PERO DE OTRO HOTEL?
    TIPO_DOCUMENTO VARCHAR2(255) NOT NULL,
    DOCUMENTO VARCHAR(255) NOT NULL PRIMARY KEY,
    NOMBRE VARCHAR2(255) NOT NULL,
    CORREO VARCHAR2(255) NOT NULL,
    LOGIN VARCHAR2(255) NOT NULL UNIQUE,
    CLAVE VARCHAR2(255) NOT NULL,
    TIPO VARCHAR2(255) NOT NULL CHECK( TIPO IN('CLIENTE','RECEPCIONISTA','EMPLEADO','ADMINISTRADOR', 'GERENTE')),
    RESERVA_SERVICIO_ID NUMBER REFERENCES RESERVA_SERVICIO(ID)
);

CREATE TABLE EMPLEADOS (
    EMPLEADO_TIP_DOC VARCHAR2(255) NOT NULL,
    EMPLEADO_DOC VARCHAR2(255) NOT NULL,
    FOREIGN KEY (EMPLEADO_TIP_DOC,EMPLEADO_DOC) REFERENCES USUARIO(TIPO_DOCUMENTO, DOCUMENTO),
    HOTEL_ID NUMBER NOT NULL REFERENCES HOTEL(ID)
);

CREATE TABLE CUENTA (
    ID NUMBER NOT NULL PRIMARY KEY,
    COSTO NUMBER NOT NULL,
    PAGADA NUMBER NOT NULL CHECK (PAGADA IN (1,0)),
    RESERVA_ID NUMBER NOT NULL REFERENCES RESERVA(ID)
);

CREATE TABLE DOTACION (
    ID NUMBER NOT NULL PRIMARY KEY,
    NOMBRE VARCHAR2(255) NOT NULL,
    COSTO NUMBER NOT NULL
);

CREATE TABLE CONSUMO (
    ID NUMBER NOT NULL PRIMARY KEY,
    FECHA DATE NOT NULL,
    COSTO NUMBER NOT NULL,
    DESCRIPCION VARCHAR2(255) NOT NULL
);

CREATE TABLE PRODUCTO (
    ID NUMBER NOT NULL PRIMARY KEY,
    NOMBRE VARCHAR2(255) NOT NULL,
    COSTO NUMBER NOT NULL
);

CREATE TABLE TIENDA (
    ID NUMBER NOT NULL PRIMARY KEY,
    NOMBRE VARCHAR2(255) NOT NULL,
    HOTEL_ID NUMBER NOT NULL REFERENCES HOTEL(ID)
);

CREATE TABLE SUPERMERCADO (
    ID NUMBER NOT NULL PRIMARY KEY,
    NOMBRE VARCHAR2(255) NOT NULL,
    HOTEL_ID NUMBER NOT NULL REFERENCES HOTEL(ID)
);

CREATE TABLE GIMNASIO (
    ID NUMBER NOT NULL PRIMARY KEY,
    CAPACIDAD NUMBER NOT NULL,
    OCUPACION_ACTUAL NUMBER NOT NULL,
    HORARIO_INICIO DATE NOT NULL,
    HORARIO_FIN DATE NOT NULL,
    HOTEL_ID NUMBER NOT NULL REFERENCES HOTEL(ID)
);

CREATE TABLE MAQUINA (
    ID NUMBER NOT NULL PRIMARY KEY,
    TIPO_MAQUINA VARCHAR2(255) NOT NULL,
    GIMNASIO_ID NUMBER NOT NULL REFERENCES GIMNASIO(ID)
);

CREATE TABLE LIMPIEZA_ROPA (
    ID NUMBER PRIMARY KEY,
    NUM_PRENDAS NUMBER NOT NULL,
    TIPO VARCHAR2(255) NOT NULL,
    HOTEL_ID NUMBER REFERENCES HOTEL(ID)
);

CREATE TABLE PRESTAMO_UTENSILIOS (
    ID NUMBER PRIMARY KEY,
    BUEN_ESTADO NUMBER NOT NULL CHECK (BUEN_ESTADO IN(0,1)),
    COSTO NUMBER NOT NULL,
    NOMBRE VARCHAR2(255) NOT NULL,
    HOTEL_ID NUMBER REFERENCES HOTEL(ID)
);

CREATE TABLE FACTURA (
    ID NUMBER NOT NULL PRIMARY KEY,
    FECHA DATE NOT NULL,
    HABITACION_ID NUMBER REFERENCES HABITACION(ID),
    SALON_REUNIONES_ID NUMBER REFERENCES SALON_REUNIONES(ID),
    SALON_CONFERENCIAS_ID NUMBER REFERENCES SALON_CONFERENCIAS(ID),
    PRESTAMO_UTENSILIOS_ID NUMBER REFERENCES PRESTAMO_UTENSILIOS(ID),
    LIMPIEZA_ROPA_ID NUMBER REFERENCES LIMPIEZA_ROPA(ID),
    SERVICIO_ID NUMBER REFERENCES SERVICIO(ID)
);

CREATE TABLE JOIN_PLAN_TO_HOTEL (
    HOTEL_ID NUMBER NOT NULL REFERENCES HOTEL(ID),
    PLAN_ID NUMBER NOT NULL REFERENCES PLAN(ID)
);

CREATE TABLE JOIN_PRODUCTO_TO_BAR (
    BAR_ID NUMBER NOT NULL REFERENCES BAR(ID),
    PRODUCTO_ID NUMBER NOT NULL REFERENCES PRODUCTO(ID)
);

CREATE TABLE JOIN_RESERVA_TO_CLIENTE (
    CLIENTE_ID VARCHAR2(255) REFERENCES USUARIO(DOCUMENTO),
    RESERVA_ID NUMBER NOT NULL REFERENCES RESERVA(ID) UNIQUE
);

CREATE TABLE JOIN_FACTURA_TO_PRODUCTO (
    PRODUCTO_ID NUMBER NOT NULL REFERENCES PRODUCTO(ID),
    FACTURA_ID NUMBER NOT NULL REFERENCES FACTURA(ID)
);

CREATE TABLE JOIN_PRODUCTO_TO_SUPERMERCADO (
    SUPERMERCADO_ID NUMBER NOT NULL REFERENCES SUPERMERCADO(ID),
    PRODUCTO_ID NUMBER NOT NULL REFERENCES PRODUCTO(ID)
);

CREATE TABLE JOIN_PRODUCTO_TO_TIENDA (
    TIENDA_ID NUMBER NOT NULL REFERENCES TIENDA(ID),
    PRODUCTO_ID NUMBER NOT NULL REFERENCES PRODUCTO(ID)
);

CREATE TABLE JOIN_PRODUCTO_TO_RESTAURANTE (
    RESTAURANTE_ID NUMBER NOT NULL REFERENCES RESTAURANTE(ID),
    PRODUCTO_ID NUMBER NOT NULL REFERENCES PRODUCTO(ID)
);

CREATE TABLE JOIN_SERVICIO_TO_SPA (
    SPA_ID NUMBER NOT NULL REFERENCES SPA(ID),
    SERVICIO_ID NUMBER NOT NULL REFERENCES SERVICIO(ID)
);

CREATE TABLE JOIN_HABITACION_TO_DOTACION (
    DOTACION_ID NUMBER NOT NULL REFERENCES DOTACION(ID),
    HABITACION_ID NUMBER NOT NULL REFERENCES HABITACION(ID)
);

CREATE TABLE JOIN_CONSUMO_TO_HABITACION (
    CONSUMO_ID NUMBER NOT NULL REFERENCES CONSUMO(ID),
    HABITACION_ID NUMBER NOT NULL REFERENCES HABITACION(ID)
);

COMMIT;